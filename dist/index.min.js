function dns(e,n){"use strict";var t=nativedns.createServer(),s=[];if("number"!=typeof e||e%1!==0)throw"Wrong port syntax";"undefined"==typeof n&&(n="0.0.0.0"),t.on("request",function(e,n){s.forEach(function(t){if(t.regex.test(e.question[0].name))t.callback(e.question[0].name,function(s){n.answer.push(nativedns.A({name:e.question[0].name,address:s,ttl:t.ttl})),n.send()});else{console.log("Forwarding ",e.question[0].name);var s=nativedns.Request({question:e.question[0],server:{address:"8.8.8.8",port:53,type:"udp"},timeout:1e3});s.on("message",function(e,t){t.answer.forEach(function(e){n.answer.push(e)}),n.send()}),s.send()}})}),t.on("error",function(e){console.log(e.stack)});this.sieve=function(e,n,t){"undefined"==typeof t&&(t=600),s.push({regex:e,callback:n,ttl:t})},this.serve=function(){t.serve(e,n)}}var nativedns=require("native-dns");module.exports={dns:dns};